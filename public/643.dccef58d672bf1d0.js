"use strict";(self.webpackChunktp_final_labo=self.webpackChunktp_final_labo||[]).push([[643],{5643:(x,u,a)=>{a.r(u),a.d(u,{LoginComponent:()=>C});var c=a(6895),d=a(6557),m=a(9803),p=a(1746),i=a(433),e=a(8256);function g(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",1),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.backClick(o))}),e.TgZ(1,"div",2)(2,"i",3),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.hideModalEvent.emit(!1))}),e.qZA(),e.TgZ(3,"h1",4),e._uU(4,"Elige Usuario"),e.qZA(),e.TgZ(5,"div",5)(6,"button",6),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.userSelected(o,"Sergio12345678"))}),e._uU(7,"sergio@gmail.com"),e.qZA(),e.TgZ(8,"button",6),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.userSelected(o,"Admin12345678"))}),e._uU(9,"admin@gmail.com"),e.qZA(),e.TgZ(10,"button",6),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.userSelected(o,"Empleado12345678"))}),e._uU(11,"empleado@gmail.com"),e.qZA()()()()}}let h=(()=>{class r{constructor(){this.showUsersModal=!1,this.hideModalEvent=new e.vpe,this.userSelectedEvent=new e.vpe}ngOnInit(){}backClick(t){t.target.classList.contains("modal-background")&&this.hideModalEvent.emit(!1)}userSelected(t,n){this.userSelectedEvent.emit({email:t.target.textContent,password:n}),this.hideModalEvent.emit(!1)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-modal-users"]],inputs:{showUsersModal:"showUsersModal"},outputs:{hideModalEvent:"hideModalEvent",userSelectedEvent:"userSelectedEvent"},standalone:!0,features:[e.jDz],decls:1,vars:1,consts:[["class","modal-background",3,"click",4,"ngIf"],[1,"modal-background",3,"click"],[1,"modal-container"],[1,"fa-solid","fa-xmark","modal-close",3,"click"],[1,"modal-title"],[1,"modal-content"],[1,"btn","btn-primary",3,"click"]],template:function(t,n){1&t&&e.YNc(0,g,12,0,"div",0),2&t&&e.Q6J("ngIf",n.showUsersModal)},dependencies:[c.ez,c.O5],styles:[".modal-background[_ngcontent-%COMP%]{position:absolute;z-index:10;display:flex;justify-content:center;align-items:center;width:100%;height:100%;top:0;left:0;background-color:#0008}.modal-background[_ngcontent-%COMP%]   .modal-container[_ngcontent-%COMP%]{z-index:100;position:absolute;display:grid;grid-template-rows:auto 1fr;padding:20px;background-color:#fff;width:80%;max-width:350px;height:75%;max-height:350px;animation:_ngcontent-%COMP%_startModal .75s;border-radius:20px}.modal-background[_ngcontent-%COMP%]   .modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-evenly;height:100%}.modal-background[_ngcontent-%COMP%]   .modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-style:normal;text-transform:none}.modal-background[_ngcontent-%COMP%]   .modal-container[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-weight:700;text-align:center;margin-top:40px;color:#000}.modal-background[_ngcontent-%COMP%]   .modal-container[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]{border:none;position:absolute;cursor:pointer;font-size:25px;top:10px;right:10px}@keyframes _ngcontent-%COMP%_startModal{0%{transform:scale(.1)}to{transform:scale(1)}}"]}),r})();var f=a(4132),_=a(3071),v=a(7185);function w(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",25)(1,"div",26)(2,"app-alert",27),e.NdJ("hideAlertEvent",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.showAlert=o)}),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(2),e.Q6J("text",t.textError||"Error, algo salio mal")}}let C=(()=>{class r{constructor(t,n,o){this.userService=t,this.router=n,this.toastr=o,this.loading=!1,this.showAlert=!1,this.showUsersModal=!1,this.formLog=new i.cw({email:new i.NI,password:new i.NI,showPassword:new i.NI})}ngOnInit(){}onSubmit(){this.loading=!0,this.showAlert=!1,this.userService.login(this.formLog.value).then(t=>{this.searchIntoFirestore(t.user)}).catch(t=>{this.loading=!1,this.toastr.error(this.firebaseError(t.code),"Error")})}searchIntoFirestore(t){this.userService.getUserById(t.uid).then(n=>{const o=n.data();o?.type>1&&!t.emailVerified?this.toastr.error("Debes verificar tu email","Error de verificaci\xf3n"):2!==o?.type||o?.valid?(this.userService.setCurrentUser(o),this.router.navigate(["/bienvenido"])):this.toastr.error("Un Administrador debe habilitar tu cuenta","Sin autorizaci\xf3n"),this.loading=!1})}firebaseError(t){switch(t){case"auth/missing-email":return this.textError="Por favor ingrese un correo electronico";case"auth/missing-password":return this.textError="Por favor ingrese una contrase\xf1a";case"auth/invalid-email":return this.textError="El correo no es valido";case"auth/auth/user-not-found":return this.textError="El usuario no esta registrado";case"auth/wrong-password":return this.textError="La contrase\xf1a no es correcta";case"auth/network-request-failed":return this.textError="Se perdi\xf3 la conexion a internet";default:return this.textError="Error, algo salio mal"}}userSelected(t){this.password.setValue(t.password),this.email.setValue(t.email)}get showPassword(){return this.formLog.controls.showPassword}get password(){return this.formLog.controls.password}get email(){return this.formLog.controls.email}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(_.K),e.Y36(d.F0),e.Y36(v._W))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-login"]],standalone:!0,features:[e.jDz],decls:32,vars:5,consts:[[1,"vh-100"],[3,"showSpinner"],[1,"container-fluid","content","h-100"],["routerLink","/bienvenido"],[1,"fa-solid","fa-arrow-left","position-absolute","top-0","start-0","m-4","fs-3","color-tertiary"],[1,"container",3,"formGroup","ngSubmit"],[1,"row","justify-content-center","mb-3"],[1,"col-12","text-center","color-tertiary"],["class","row justify-content-center",4,"ngIf"],[1,"row","justify-content-center","gap-2"],[1,"col-10","p-0"],["controlName","email","label","Correo Electr\xf3nico","type","text",1,""],["controlName","password","label","Contrase\xf1a",1,"",3,"type"],[1,"col-10","p-0","d-flex","justify-content-between","aling-items-center"],[1,"form-check","form-switch"],["formControlName","showPassword","type","checkbox","role","switch","id","flexSwitchCheckChecked","checked","",1,"form-check-input"],["for","flexSwitchCheckChecked",1,"form-check-label","color-tertiary"],["type","button",1,"btn","bg-color-primary",3,"click"],[1,"fa-solid","fa-users","text-light"],[1,"col-12","d-flex","justify-content-center","align-items-center"],[1,"color-tertiary"],["routerLink","/register",1,"color-primary",3,"click"],[1,"col-12","d-flex","justify-content-center"],["expand","block","shape","round","type","submit",1,"btn","bg-color-primary","text-light"],[3,"showUsersModal","hideModalEvent","userSelectedEvent"],[1,"row","justify-content-center"],[1,"col-12","text-white"],[3,"text","hideAlertEvent"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-spinner",1),e.TgZ(2,"div",2)(3,"a",3),e._UZ(4,"i",4),e.qZA(),e.TgZ(5,"form",5),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(6,"div",6)(7,"div",7)(8,"h1"),e._uU(9,"Iniciar Sesi\xf3n"),e.qZA()()(),e.YNc(10,w,3,1,"div",8),e.TgZ(11,"div",9)(12,"div",10),e._UZ(13,"app-form-input",11),e.qZA(),e.TgZ(14,"div",10),e._UZ(15,"app-form-input",12),e.qZA(),e.TgZ(16,"div",13)(17,"div",14),e._UZ(18,"input",15),e.TgZ(19,"label",16),e._uU(20,"Mostrar Contrase\xf1a"),e.qZA()(),e.TgZ(21,"button",17),e.NdJ("click",function(){return n.showUsersModal=!0}),e._UZ(22,"i",18),e.qZA()(),e.TgZ(23,"div",19)(24,"p",20),e._uU(25,"\xbfNo tenes cuenta? "),e.TgZ(26,"a",21),e.NdJ("click",function(){return n.formLog.reset()}),e._uU(27," Registrate"),e.qZA()()(),e.TgZ(28,"div",22)(29,"button",23),e._uU(30," Iniciar Sesion "),e.qZA()()()(),e.TgZ(31,"app-modal-users",24),e.NdJ("hideModalEvent",function(s){return n.showUsersModal=s})("userSelectedEvent",function(s){return n.userSelected(s)}),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("showSpinner",n.loading),e.xp6(4),e.Q6J("formGroup",n.formLog),e.xp6(5),e.Q6J("ngIf",n.showAlert),e.xp6(5),e.Q6J("type",n.formLog.controls.showPassword.value?"text":"password"),e.xp6(16),e.Q6J("showUsersModal",n.showUsersModal))},dependencies:[c.ez,c.O5,p.s,m.w,i.u5,i._Y,i.Wl,i.JJ,i.JL,d.Bz,d.rH,i.UX,i.sg,i.u,h,f.O],styles:[".content[_ngcontent-%COMP%]{width:100%;height:90%;display:flex;justify-content:center;align-items:center}form[_ngcontent-%COMP%]{max-width:750px}"]}),r})()}}]);